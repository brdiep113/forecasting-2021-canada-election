---
title: "Modelling"
author: "Eric Zhu, Brian Diep, Tanvir Hyder, Ashley Zhang, Kristin Huang"
date: "09/19/2021"
output:
  pdf_document: 
    toc: yes
    toc_depth: 3
    extra_dependencies: ["float"]
header-includes:
- \usepackage{fancyhdr}
- \usepackage[T1]{fontenc}
- \usepackage{lmodern}
- \usepackage{bm}
- \usepackage[ruled,vlined]{algorithm2e}
- \usepackage{setspace}
- \usepackage{fancyhdr}
- \pagestyle{fancy}
- \usepackage{float}
- \floatplacement{figure}{H}
- \fancyhead[LO,LE]{Eric Zhu, Brian Diep, Tanvir Hyder, Ashley Zhang, Kristin Huang}
---


```{r}
library(tidyverse)
library(ggplot2)
library(dplyr)
library(brms)
```


```{r}
model <- brm(formula = votechoice ~ education + cps19_income_cat + own_residence + language + ethnicity + cps19_bornin_canada + (1| language) + (1 | cps19_income_cat) + (1 + cps19_income_cat + own_residence + language | ethnicity), 
              data = predictors_df, 
              family='categorical', 
              file = "../outputs/model/model_state",
              cores=4,
              chains=4, 
              backend = "cmdstanr", 
              threads = threading(4))
```


```{r}
summary(model1)
loo_vals <- loo(model1)
plot(loo_vals)
plot(model1)
```

